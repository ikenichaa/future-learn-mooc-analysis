---
title: "Future Learn - Analysis Report"
author: "Nicha Wilanan"
date: "2024-10-31"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir= normalizePath('..'))
```


```{r, include=FALSE, message=FALSE}
library(ProjectTemplate)
load.project()
```

# Introduction
TODO:

# CRISP-DM Round 1

## 1. Business Understandings

## 1.1 Determine Business Objective
This report aims to gather information for an author of self-development books who would like to share valuable tips for people who aspire to do self-learning in their free time. In the world's current trends, there are so many concepts to learn with less time. The stakeholder's objective is to help people achieve their goals by extracting the essence of success factors to finish self-paced learning. The stakeholder aims to dedicate one chapter of the book to tell anecdotes of how some people can finish the online course while others don't as an exemplar for the readers to follow. Therefore, the criteria for the success finding in this report is to find the common characteristics of those who successfully finish the online course, which is unique to the people who do not complete the course.

## 1.2 Assess Situation 
The risk for the report is that it relies mainly on the learner’s survey response, so the answer may not be accurate in case the learners do not answer truthfully. Moreover, the analysis may not reflect all learners’ method of study as there are only minority of learners complete the survey.

There is one terminology in this phase, which is the word *learner archetype*. The learner archetype groups learners with the same behavior together. In this report, there are 7 archetypes - advancers, explorers, fixers, flourishers, hobbyists, preparers and vitalisers. If you want to learn more about each archetype, you can go through this [link.](https://ugc.futurelearn.com/uploads/files/2f/ce/2fce94dd-54e6-4614-972d-ce9c3a6d7d91/Learner-Archetypes.pdf)

## 1.3 Produce Project Plan 
The analysis will follow the CRISP-DM methodologies for two cycles in order to get the key factors leads to course completion. Each cycle will come up with different factors that potentially lead to finish the course. After exploring and analyse data, each factor will be evaluated. In this research, R language is used to extract the insights through statistical summary and visualization. 

Initially, the research question for the first cycle is:

**Do the learner archetypes affect online course success rate?**

## 1.4 Determine Data Mining Goals
If archetype is significant to the MOOC finish rate, there should be a huge difference in the archetype of finisher and those who unable to finish the course. However, if the archetype is quite similar in both groups, it cannot be deduce that the archetype has an effect on the course completion.

# 2. Data Understanding
## 2.1 Collect Initial Data
Future-Learn collected and provided the data that will be used in this report. For this CRISP-DM cycle, three groups of datasets will be utilized. First is the data of archetype survey responses, which will be used to gather the learner's archetype. Second is the course enrollment data that tells how many people enrolled in each course. Lastly, the course activity determines how far the learner goes through the steps in the course.

## 2.2 Describe Data

The data that will be explored is the raw data of the course named **Cyber Security: Safety at Home, Online, in Life.** This course is designed to be finished in three weeks. Each week consists of multiple steps, including articles, videos, quizzes, and discussions. From September 2016 to September 2018, the course had been run for 7 times. Throughout the runs, steps are added to enhance learner understandings. From `r count(distinct(activity_1, week_number, step_number))` steps in the first run, the run was enhanced to `r count(distinct(activity_7, week_number, step_number))` steps in the seventh run. The datasets of archetype, course enrollment, and course activity are kept for each run.

These are the list of table for this analysis and its field name:

1. Activity Step: `r colnames(activity_1)`
2. Enrollment: `r colnames(enroll_1)`
3. Archetype Survey Response: `r colnames(arch_1)`

The field that are picked for the analysis will be mentioned in part 3.1.


## 2.3 Explore Data

```{r, echo=FALSE}
enroll_num <- c(
    nrow(unique(enroll_1[, 'learner_id'])),
    nrow(unique(enroll_2[, 'learner_id'])),
    nrow(unique(enroll_3[, 'learner_id'])),
    nrow(unique(enroll_4[, 'learner_id'])),
    nrow(unique(enroll_5[, 'learner_id'])),
    nrow(unique(enroll_6[, 'learner_id'])),
    nrow(unique(enroll_7[, 'learner_id']))
)

enroll_num_prettify <- formatC(enroll_num,format="d", big.mark=",")

finish_num <- c(
    nrow(activity_1_learner_progress_archetype |> filter(finish_percentage >= 80)),
    nrow(activity_2_learner_progress_archetype |> filter(finish_percentage >= 80)),
    nrow(activity_3_learner_progress_archetype |> filter(finish_percentage >= 80)),
    nrow(activity_4_learner_progress_archetype |> filter(finish_percentage >= 80)),
    nrow(activity_5_learner_progress_archetype |> filter(finish_percentage >= 80)),
    nrow(activity_6_learner_progress_archetype |> filter(finish_percentage >= 80)),
    nrow(activity_7_learner_progress_archetype |> filter(finish_percentage >= 80))
)

finish_num_prettify <- formatC(finish_num,format="d", big.mark=",")

percent_finish <- paste(round(finish_num/enroll_num * 100, 2), "%")

enroll_and_finish_df <- data.frame(Enrollment=enroll_num_prettify, Finisher=finish_num_prettify, Finisher_Percentage = percent_finish)
rownames(enroll_and_finish_df) <- c('Run 1', 'Run 2', 'Run 3', 'Run 4', 'Run 5', 'Run 6', 'Run 7')
kable(enroll_and_finish_df)
```

The table above shows a vast difference in the enrollment number and the finisher in each run. In this report, the learners are considered to finish the course if they finish more than or equal to 80% of the activities. There is a clear pattern that most people do not finish the course, with the lowest number of finishers compared to the enroller in Run 6 at approximately 10% and the highest number in Run 5 at almost 20%. 

```{r, echo=FALSE}
common_theme <- theme_minimal() +
    theme(
        axis.text.x=element_blank(),
        axis.ticks.x=element_blank(),
        legend.position="none", # Remove individual legends
    )

common_scale <- scale_fill_manual(
    name = "Archetype",
    values = c(
        "Advancers" = "#F08080",
        "Explorers" = "#DAA520",
        "Fixers" = "#90EE90",
        "Flourishers" = "#98FB98",
        "Hobbyists" = "#40E0D0",
        "Other" = "#87CEEB",
        "Preparers" = "#DDA0DD",
        "Vitalisers" = "#FF69B4"
    )
)

a_3 <- archetype_counts |> filter(run=="3") |> 
    ggplot(aes(x = archetype, y = count, fill = archetype)) + 
    geom_bar(stat='identity') +
    common_theme +
    common_scale +
    labs(
        x = "Archetype",
        y = "Count",
        title = "Run 3"
    )

a_4 <- archetype_counts |> filter(run=="4") |> 
    ggplot(aes(x = archetype, y = count, fill = archetype)) + 
    geom_bar(stat='identity') +
    common_theme +
    common_scale +
    labs(
        x = "Archetype",
        y = "Count",
        title = "Run 4"
    )

a_5 <- archetype_counts |> filter(run=="5") |> 
    ggplot(aes(x = archetype, y = count, fill = archetype)) + 
    geom_bar(stat='identity') +
    common_theme +
    common_scale +
    labs(
        x = "Archetype",
        y = "Count",
        title = "Run 5"
    )

a_6 <- archetype_counts |> filter(run=="6") |> 
    ggplot(aes(x = archetype, y = count, fill = archetype)) + 
    geom_bar(stat='identity') +
    common_theme +
    common_scale +
    labs(
        x = "Archetype",
        y = "Count",
        title = "Run 6"
    )

a_7 <- archetype_counts |> 
    filter(run=="7") |> 
    ggplot(aes(x = archetype, y = count, fill = archetype)) +
    common_theme +
    geom_bar(stat='identity') +
    common_scale +
    labs(
        x = "Archetype",
        y = "Count",
        title = "Run 7"
    )

archetype_plot <- ggarrange(a_3, a_4, a_5, a_6, a_7,  common.legend = TRUE, legend = "bottom")

annotate_figure(
  archetype_plot, 
  top = text_grob(
          "Comparing archetype numbers in each run", 
          face = "bold", 
          size = 12, 
          hjust = 0, 
          vjust = 0.4, 
          x = 0
  )
)
```


When comparing the number of archetype in each run, it is obvious that the number of each archetype does not distribute evenly among the learners. The top 4 archetype posesses by the learner are Vitalisers, Advancers, Explorers and Fixers.


## 2.4 Verify Data Quality

The data quality of this round analysis is quite good and there are no missing data in the available table. Although archetype survey response of Run 1 and Run 2 were not kept, the report can still analyse the link between archetype and learner finishing rate from other Runs. The only concern is that the survey response rate is low comparing to the enrollment, which will be hard to deduce the result of archetype effect from a whole enrollment population.

```{r, echo=FALSE}
archetype_response_num <- c(
    nrow(arch_1),
    nrow(arch_2),
    nrow(arch_3),
    nrow(arch_4),
    nrow(arch_5),
    nrow(arch_6),
    nrow(arch_7)
)

percent_response <- paste(round(archetype_response_num/enroll_num * 100, 2), "%")

enroll_and_response_df <- data.frame(Enrollment=enroll_num_prettify, Response_Survey=archetype_response_num, Response_Percentage = percent_response)
rownames(enroll_and_response_df) <- c('Run 1', 'Run 2', 'Run 3', 'Run 4', 'Run 5', 'Run 6', 'Run 7')
kable(enroll_and_response_df)
```

## 3. Data Preparation
## 3.1 Select Data
1. Activity Step
This data is going to be used as a criteria on finding successful learner. As mentioned before, the learner is considered to complete the course if they completed more than 80% of the steps in the module. To check that, the learner_id, week_number, step_number, and last_completed_at will be used.

2. Enrollment
The enrollment data is used just for the exploratory purpose and to understand learners more. There is no direct use to answer the main questions on the archetype for this round.

3. Archetype
This table is another main table that will be used along with the activity step. It is needed to know the learner archetype. There are two column being used, learner_id and archetype.


## 3.2 Clean Data
The data selected is quite clean, so we are going to clean it just by select the fields needed and keep only the unique rows

## 3.3 Construct Data
After selected the field, new table is created from attributes in the activity step data set. This new table calls *learner_progress* contains learner progress and the archetype. Firstly, it is done by counting the number of steps each learner finished. Then, the percentage of the steps done is calculated and store in a new field. Later, there is an attribute called *finish* that stores boolean of whether the steps are complete more than 80%, which is the threshold for the completion of the course in this report.

## 3.4 Integrate Data
Afterwards, the *learner_progress* table is merged with the archetype table by *learner_id* to show the type of each learner if any. This new table is called *learner_progress_archetype*

## 4. Modelling

